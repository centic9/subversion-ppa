Description: fix denial of service via SVNParentPath walking
Origin: upstream, http://svn.apache.org/viewvc?view=revision&revision=1033166
Bug-Debian: http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=608989

diff -Nur subversion-1.6.6dfsg/subversion/mod_dav_svn/repos.c subversion-1.6.6dfsg.new/subversion/mod_dav_svn/repos.c
--- subversion-1.6.6dfsg/subversion/mod_dav_svn/repos.c	2009-10-14 13:05:15.000000000 -0500
+++ subversion-1.6.6dfsg.new/subversion/mod_dav_svn/repos.c	2011-01-14 12:36:08.000000000 -0600
@@ -3781,6 +3781,12 @@
   walker_ctx_t ctx = { 0 };
   dav_error *err;
 
+  if (params->root->info->restype == DAV_SVN_RESTYPE_PARENTPATH_COLLECTION)
+    {
+      /* Cannot walk an SVNParentPath collection, there is no repository. */
+      return NULL;
+    }
+
   ctx.params = params;
 
   ctx.wres.walk_ctx = params->walk_ctx;
